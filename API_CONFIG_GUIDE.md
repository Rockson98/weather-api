# ğŸ”§ APIé…ç½®æŒ‡å—

## ğŸ“‹ é—®é¢˜è¯Šæ–­

æ ¹æ®æµ‹è¯•ç»“æœï¼Œæ‚¨é‡åˆ°çš„404é”™è¯¯ä¸»è¦æ˜¯ç”±äº **APIå¯†é’¥æœªé…ç½®** å¯¼è‡´çš„ã€‚

## ğŸ› ï¸ è§£å†³æ­¥éª¤

### ç¬¬ä¸€æ­¥ï¼šè·å–OpenWeatherMap APIå¯†é’¥

1. **æ³¨å†Œè´¦æˆ·**
   - è®¿é—® [OpenWeatherMap](https://openweathermap.org/api)
   - æ³¨å†Œå…è´¹è´¦æˆ·

2. **è·å–APIå¯†é’¥**
   - ç™»å½•åè¿›å…¥ "API Keys" é¡µé¢
   - å¤åˆ¶æ‚¨çš„APIå¯†é’¥ï¼ˆæ ¼å¼ç±»ä¼¼ï¼š`811a271ed44e1d5599d8e0c773417557`ï¼‰

### ç¬¬äºŒæ­¥ï¼šé…ç½®æœ¬åœ°ç¯å¢ƒ

1. **åˆ›å»º.envæ–‡ä»¶**
   åœ¨é¡¹ç›®æ ¹ç›®å½•åˆ›å»º `.env` æ–‡ä»¶ï¼š
   ```
   WEATHER_API_KEY=your_actual_api_key_here
   PORT=8000
   HOST=0.0.0.0
   ```

2. **æµ‹è¯•æœ¬åœ°API**
   ```bash
   python test_weather_api.py
   ```

### ç¬¬ä¸‰æ­¥ï¼šéƒ¨ç½²åˆ°Render

1. **æ¨é€ä»£ç åˆ°GitHub**
   ```bash
   git add .
   git commit -m "æ·»åŠ APIå¯†é’¥é…ç½®"
   git push origin main
   ```

2. **åœ¨Renderä¸­è®¾ç½®ç¯å¢ƒå˜é‡**
   - ç™»å½• [render.com](https://render.com)
   - è¿›å…¥æ‚¨çš„æœåŠ¡è®¾ç½®
   - åœ¨ "Environment Variables" éƒ¨åˆ†æ·»åŠ ï¼š
     ```
     WEATHER_API_KEY = your_actual_api_key_here
     PORT = 8000
     HOST = 0.0.0.0
     ```

3. **é‡æ–°éƒ¨ç½²**
   - ç‚¹å‡» "Manual Deploy"
   - ç­‰å¾…éƒ¨ç½²å®Œæˆ

### ç¬¬å››æ­¥ï¼šåœ¨Difyä¸­é…ç½®

1. **è·å–æ­£ç¡®çš„API URL**
   - ä»Renderæ§åˆ¶å°å¤åˆ¶æ‚¨çš„æœåŠ¡URL
   - æ ¼å¼ç±»ä¼¼ï¼š`https://your-app-name.onrender.com`

2. **åœ¨Difyä¸­é…ç½®å·¥å…·**
   - APIç«¯ç‚¹ï¼š`https://your-app-name.onrender.com/weather`
   - è¯·æ±‚æ–¹æ³•ï¼šGET
   - å‚æ•°ï¼š`city` (string, å¿…éœ€)

## ğŸ” æ•…éšœæ’é™¤

### é—®é¢˜1ï¼šAPIå¯†é’¥æœªé…ç½®
**é”™è¯¯ä¿¡æ¯**ï¼š`{"error":"APIå¯†é’¥æœªé…ç½®"}`

**è§£å†³æ–¹æ¡ˆ**ï¼š
- æ£€æŸ¥.envæ–‡ä»¶æ˜¯å¦å­˜åœ¨
- ç¡®è®¤APIå¯†é’¥æ ¼å¼æ­£ç¡®
- é‡å¯æœåŠ¡å™¨

### é—®é¢˜2ï¼š404 Not Found
**å¯èƒ½åŸå› **ï¼š
- API URLä¸æ­£ç¡®
- æœåŠ¡æœªæ­£ç¡®éƒ¨ç½²
- è·¯ç”±é…ç½®é”™è¯¯

**è§£å†³æ–¹æ¡ˆ**ï¼š
- éªŒè¯RenderæœåŠ¡çŠ¶æ€
- æ£€æŸ¥APIç«¯ç‚¹URL
- æŸ¥çœ‹æœåŠ¡æ—¥å¿—

### é—®é¢˜3ï¼šåŸå¸‚æŸ¥è¯¢å¤±è´¥
**å¯èƒ½åŸå› **ï¼š
- åŸå¸‚åç§°ä¸æ”¯æŒ
- APIå¯†é’¥æƒé™ä¸è¶³

**è§£å†³æ–¹æ¡ˆ**ï¼š
- ä½¿ç”¨æ”¯æŒçš„åŸå¸‚åç§°ï¼ˆåŒ—äº¬ã€ä¸Šæµ·ã€å¹¿å·ç­‰ï¼‰
- æ£€æŸ¥APIå¯†é’¥æ˜¯å¦æœ‰æ•ˆ

## ğŸ“Š æµ‹è¯•éªŒè¯

### æœ¬åœ°æµ‹è¯•
```bash
# å¯åŠ¨æœåŠ¡å™¨
python main.py

# æµ‹è¯•API
python test_weather_api.py
```

### è¿œç¨‹æµ‹è¯•
```bash
# æµ‹è¯•æœåŠ¡çŠ¶æ€
curl https://your-app-name.onrender.com/

# æµ‹è¯•å¤©æ°”æŸ¥è¯¢
curl "https://your-app-name.onrender.com/weather?city=åŒ—äº¬"
```

## ğŸ¯ é¢„æœŸç»“æœ

### æˆåŠŸçš„å“åº”ç¤ºä¾‹
```json
{
  "city": "Beijing",
  "temperature": 15.5,
  "feels_like": 14.8,
  "description": "å¤šäº‘",
  "humidity": 65
}
```

### æ”¯æŒçš„åŸå¸‚
- åŒ—äº¬ (Beijing)
- ä¸Šæµ· (Shanghai)
- å¹¿å· (Guangzhou)
- æ·±åœ³ (Shenzhen)
- æ­å· (Hangzhou)
- å—äº¬ (Nanjing)
- æˆéƒ½ (Chengdu)
- æ­¦æ±‰ (Wuhan)
- è¥¿å®‰ (Xian)
- é‡åº† (Chongqing)

## ğŸ“ æŠ€æœ¯æ”¯æŒ

å¦‚æœä»ç„¶é‡åˆ°é—®é¢˜ï¼š
1. æ£€æŸ¥RenderæœåŠ¡æ—¥å¿—
2. éªŒè¯APIå¯†é’¥æœ‰æ•ˆæ€§
3. ç¡®è®¤ç½‘ç»œè¿æ¥æ­£å¸¸
4. æŸ¥çœ‹æœ¬æ–‡æ¡£çš„æ•…éšœæ’é™¤éƒ¨åˆ†
